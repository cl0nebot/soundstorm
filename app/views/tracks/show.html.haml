%article.track
  %header.track__title.track-title
    %h1= @track.name
    %h2 by #{@track.user.name}
  %main
    %section.track__player
      = render 'player', track: @track
    %section.track__description
      %p= @track.description
    %section.track__comments
      %h3= t('.comments')
      - if @track.comments.none?
        %p.empty No comments.
      - else
        - @track.comments.each do |comment|
          = render 'comments/comment', comment: comment
    - if user_signed_in?
      %section.track__new-comment
        = render 'comments/form', comment: @track.comments.build(user: current_user)
  - if @track.user == current_user
    %footer.track__controls
      = link_to 'Edit', [:edit, @track]
      = link_to 'Delete', @track, method: :delete
